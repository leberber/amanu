<!-- src/app/pages/admin/admin-add-category/admin-add-category.component.html -->
<div class="content-height p-4">
  <p-card>
    <ng-template pTemplate="header">
      <div class="flex justify-content-between align-items-center p-4">
        <h2 class="m-0">{{ pageTitle | translate }}</h2>
        <p-button 
          icon="pi pi-arrow-left" 
          [label]="'common.back' | translate" 
          severity="secondary" 
          (onClick)="onCancel()"
        />
      </div>
    </ng-template>

    <form [formGroup]="categoryForm" (ngSubmit)="onSubmit()" class="p-4">
      
      <!-- ğŸ†• UPDATED: Category Names Section (No Primary Field) -->
      <div class="section-title">
        <i class="pi pi-globe mr-2"></i>{{ 'admin.categories.form.translations' | translate }}
      </div>
      <p class="text-sm text-color-secondary mb-3">
        {{ 'admin.categories.form.translation_help' | translate }}
      </p>

      <!-- English Name (Primary) -->
      <div class="language-section">
        <div class="flex align-items-center mb-2">
          <span class="language-flag">ğŸ‡¬ğŸ‡§</span>
          <strong>{{ 'admin.categories.form.english_name' | translate }} *</strong>
        </div>
        <div class="field">
          <input 
            type="text" 
            id="name_en"
            pInputText 
            formControlName="name_en" 
            [placeholder]="'admin.categories.form.english_name' | translate"
            class="w-full"
            [class.ng-invalid]="categoryForm.get('name_en')?.invalid && categoryForm.get('name_en')?.touched"
          />
          <small 
            *ngIf="categoryForm.get('name_en')?.invalid && categoryForm.get('name_en')?.touched" 
            class="p-error"
          >
            <span *ngIf="categoryForm.get('name_en')?.errors?.['required']">
              {{ 'admin.categories.form.name_required' | translate }}
            </span>
            <span *ngIf="categoryForm.get('name_en')?.errors?.['minlength']">
              {{ 'admin.categories.form.name_minlength' | translate }}
            </span>
          </small>
        </div>
      </div>

      <!-- French Name -->
      <div class="language-section">
        <div class="flex align-items-center mb-2">
          <span class="language-flag">ğŸ‡«ğŸ‡·</span>
          <strong>{{ 'admin.categories.form.french_name' | translate }} *</strong>
        </div>
        <div class="field">
          <input 
            type="text" 
            id="name_fr"
            pInputText 
            formControlName="name_fr" 
            [placeholder]="'admin.categories.form.french_name' | translate"
            class="w-full"
            [class.ng-invalid]="categoryForm.get('name_fr')?.invalid && categoryForm.get('name_fr')?.touched"
          />
          <small 
            *ngIf="categoryForm.get('name_fr')?.invalid && categoryForm.get('name_fr')?.touched" 
            class="p-error"
          >
            <span *ngIf="categoryForm.get('name_fr')?.errors?.['required']">
              {{ 'admin.categories.form.name_required' | translate }}
            </span>
            <span *ngIf="categoryForm.get('name_fr')?.errors?.['minlength']">
              {{ 'admin.categories.form.name_minlength' | translate }}
            </span>
          </small>
        </div>
      </div>

      <!-- Arabic Name -->
      <div class="language-section">
        <div class="flex align-items-center mb-2">
          <span class="language-flag">ğŸ‡©ğŸ‡¿</span>
          <strong>{{ 'admin.categories.form.arabic_name' | translate }} *</strong>
        </div>
        <div class="field">
          <input 
            type="text" 
            id="name_ar"
            pInputText 
            formControlName="name_ar" 
            [placeholder]="'admin.categories.form.arabic_name' | translate"
            class="w-full"
            dir="rtl"
            [class.ng-invalid]="categoryForm.get('name_ar')?.invalid && categoryForm.get('name_ar')?.touched"
          />
          <small 
            *ngIf="categoryForm.get('name_ar')?.invalid && categoryForm.get('name_ar')?.touched" 
            class="p-error"
          >
            <span *ngIf="categoryForm.get('name_ar')?.errors?.['required']">
              {{ 'admin.categories.form.name_required' | translate }}
            </span>
            <span *ngIf="categoryForm.get('name_ar')?.errors?.['minlength']">
              {{ 'admin.categories.form.name_minlength' | translate }}
            </span>
          </small>
        </div>
      </div>

      <!-- ğŸ†• UPDATED: Category Descriptions Section -->
      <div class="section-title">
        <i class="pi pi-file-text mr-2"></i>{{ 'admin.categories.form.descriptions' | translate }}
      </div>
      <p class="text-sm text-color-secondary mb-3">
        {{ 'admin.categories.form.description_help' | translate }}
      </p>

      <!-- English Description -->
      <div class="language-section">
        <div class="flex align-items-center mb-2">
          <span class="language-flag">ğŸ‡¬ğŸ‡§</span>
          <strong>{{ 'admin.categories.form.english_description' | translate }}</strong>
        </div>
        <div class="field">
          <textarea 
            id="description_en"
            pTextarea 
            formControlName="description_en" 
            [placeholder]="'admin.categories.form.english_description' | translate"
            class="w-full"
            rows="3"
          ></textarea>
        </div>
      </div>

      <!-- French Description -->
      <div class="language-section">
        <div class="flex align-items-center mb-2">
          <span class="language-flag">ğŸ‡«ğŸ‡·</span>
          <strong>{{ 'admin.categories.form.french_description' | translate }}</strong>
        </div>
        <div class="field">
          <textarea 
            id="description_fr"
            pTextarea 
            formControlName="description_fr" 
            [placeholder]="'admin.categories.form.french_description' | translate"
            class="w-full"
            rows="3"
          ></textarea>
        </div>
      </div>

      <!-- Arabic Description -->
      <div class="language-section">
        <div class="flex align-items-center mb-2">
          <span class="language-flag">ğŸ‡©ğŸ‡¿</span>
          <strong>{{ 'admin.categories.form.arabic_description' | translate }}</strong>
        </div>
        <div class="field">
          <textarea 
            id="description_ar"
            pTextarea 
            formControlName="description_ar" 
            [placeholder]="'admin.categories.form.arabic_description' | translate"
            class="w-full"
            rows="3"
            dir="rtl"
          ></textarea>
        </div>
      </div>

      <!-- Settings Section -->
      <div class="section-title">
        <i class="pi pi-cog mr-2"></i>{{ 'admin.categories.form.settings' | translate }}
      </div>

      <div class="grid">
        <div class="col-12">
          <div class="field">
            <label for="image_url">{{ 'admin.categories.form.image_url' | translate }}</label>
            <input 
              type="url" 
              id="image_url"
              pInputText 
              formControlName="image_url" 
              [placeholder]="'admin.categories.form.image_placeholder' | translate"
              class="w-full"
            />
            <small class="text-color-secondary">
              {{ 'admin.categories.form.image_help' | translate }}
            </small>
          </div>
        </div>

        <div class="col-12">
          <div class="field-checkbox">
            <p-checkbox 
              id="is_active" 
              formControlName="is_active" 
              binary="true"
            />
            <label for="is_active" class="ml-2">{{ 'admin.categories.form.is_active' | translate }}</label>
            <small class="block text-color-secondary mt-1">
              {{ 'admin.categories.form.active_help' | translate }}
            </small>
          </div>
        </div>
      </div>

      <!-- Translation Help Text -->
      <div class="mt-4 p-3 surface-100 border-round">
        <div class="flex align-items-start">
          <i class="pi pi-info-circle text-blue-500 mr-2 mt-1"></i>
          <div>
            <strong class="text-blue-500">{{ 'admin.categories.form.translation_guidelines' | translate }}:</strong>
            <ul class="mt-2 mb-0 text-sm text-color-secondary">
              <li>{{ 'admin.categories.form.guideline_all_required' | translate }}</li>
              <li>{{ 'admin.categories.form.guideline_english_primary' | translate }}</li>
              <li>{{ 'admin.categories.form.guideline_descriptions_optional' | translate }}</li>
              <li>{{ 'admin.categories.form.guideline_proper_formatting' | translate }}</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="flex justify-content-end gap-2 mt-4">
        <p-button 
          [label]="'admin.categories.form.cancel' | translate" 
          severity="secondary" 
          (onClick)="onCancel()"
          [disabled]="loading()"
          icon="pi pi-times"
        />
        <p-button 
          type="submit" 
          [label]="submitButtonLabel | translate" 
          [loading]="loading()"
          [disabled]="categoryForm.invalid"
          icon="pi pi-check"
        />
      </div>

      <!-- Form Validation Summary (for debugging) -->
      <div *ngIf="categoryForm.invalid && categoryForm.touched" class="mt-4 p-3 surface-200 border-round">
        <div class="flex align-items-start">
          <i class="pi pi-exclamation-triangle text-orange-500 mr-2 mt-1"></i>
          <div>
            <strong class="text-orange-500">{{ 'admin.categories.form.fix_errors' | translate }}:</strong>
            <ul class="mt-2 mb-0 text-sm">
              <li *ngIf="categoryForm.get('name_en')?.invalid && categoryForm.get('name_en')?.touched">
                {{ 'admin.categories.form.english_name_required' | translate }}
              </li>
              <li *ngIf="categoryForm.get('name_fr')?.invalid && categoryForm.get('name_fr')?.touched">
                {{ 'admin.categories.form.french_name_required' | translate }}
              </li>
              <li *ngIf="categoryForm.get('name_ar')?.invalid && categoryForm.get('name_ar')?.touched">
                {{ 'admin.categories.form.arabic_name_required' | translate }}
              </li>
            </ul>
          </div>
        </div>
      </div>
    </form>
  </p-card>

  <!-- Toast messages -->
  <p-toast />
</div>