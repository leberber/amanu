<div class="bg-gray-900 px-3 sm:px-6 py-3 hidden lg:flex align-items-stretch justify-content-end border-bottom-1 surface-border text-sm top-header-nav">
    <!-- Show this link when user IS signed in -->
    <ng-container *ngIf="user">
        <a pRipple class="text-white font-medium inline-flex align-items-center cursor-pointer px-3 hover:text-gray-200">
            <i class="pi pi-sign-out mr-2 sm:mr-3 text-sm"></i>
            <span (click)="logout()">Logout</span>
        </a>
    </ng-container>
</div>

<div class="surface-overlay px-0 sm:px-3 flex align-items-stretch relative shadow-2 bottom-header-nav">
    <div class="flex align-items-center justify-content-center pl-2">
        <p class="font-bold md:font-bold md:text-3xl sm:text-2xl">Amanu</p>
    </div>
    <div id="nav-1" class="surface-overlay mobile-menu-drop-down lg:flex absolute lg:static left-0 top-100 z-1 shadow-2 lg:shadow-none w-full lg:w-auto py-3 lg:py-0 lg:flex-grow-1 lg:justify-content-center z-5"
    [ngClass]="{'hidden': !menuVisible}">
        <ul class="list-none p-0 m-0 flex flex-column lg:flex-row">
            <!-- Account and Orders links (mobile) -->
            <div class="flex flex-column lg:hidden border-bottom-1 surface-border pb-3 mb-3">
                <a routerLink="account" (click)="menuVisible = false" class="no-underline text-700 p-3 border-round flex align-items-center hover:surface-100 mb-2">
                    <i class="pi pi-user mr-3 text-base"></i>
                    <span class="font-medium">My Account</span>
                </a>
                <a routerLink="orders" (click)="menuVisible = false" class="no-underline text-700 p-3 border-round flex align-items-center hover:surface-100">
                    <i class="pi pi-shopping-bag mr-3 text-base"></i>
                    <span class="font-medium">Orders</span>
                </a>
            </div>
            
            <!-- Main navigation items -->
            <li class="flex flex-column lg:flex-row">
                <a pRipple class="inline-flex align-items-center cursor-pointer border-right-2 lg:border-right-none lg:border-bottom-2 border-transparent 
                    hover:border-primary py-3 lg:py-0 px-4 lg:px-3 text-700 select-none text-base lg:text-base font-medium w-full lg:w-auto"
                    pStyleClass="@next" enterClass="hidden" leaveToClass="hidden">
                    <span>Women</span>
                </a>
            </li>
            <li class="flex flex-column lg:flex-row">
                <a pRipple class="inline-flex align-items-center cursor-pointer border-right-2 lg:border-right-none lg:border-bottom-2 border-transparent 
                    hover:border-primary py-3 lg:py-0 px-4 lg:px-3 text-700 select-none text-base lg:text-base font-medium w-full lg:w-auto"
                    pStyleClass="@next" enterClass="hidden" leaveToClass="hidden">
                    <span>Men</span>
                </a>
                <div class="surface-overlay shadow-none lg:shadow-2 hidden lg:absolute w-full left-0 top-100 px-6 py-0 lg:py-6 h-10rem lg:h-30rem z-1">
                    <div class="border-2 border-dashed surface-border border-round h-full"></div>
                </div>
            </li>
            <li class="flex flex-column lg:flex-row">
                <a pRipple class="inline-flex align-items-center cursor-pointer border-right-2 lg:border-right-none lg:border-bottom-2 border-transparent 
                    hover:border-primary py-3 lg:py-0 px-4 lg:px-3 text-700 select-none text-base lg:text-base font-medium w-full lg:w-auto"
                    pStyleClass="@next" enterClass="hidden" leaveToClass="hidden">
                    <span>Kids</span>
                </a>
                <div class="surface-overlay shadow-none lg:shadow-2 hidden lg:absolute w-full left-0 top-100 px-6 py-0 lg:py-6 h-10rem lg:h-30rem z-1">
                    <div class="border-2 border-dashed surface-border border-round h-full"></div>
                </div>
            </li>
        </ul>
        
        <!-- Bottom user section in mobile menu -->
<!-- Bottom user section in mobile menu -->
<div class="grid absolute bottom-0 right-0 left-0 border-top-1 border-200 shadow-1 m-2 mb-2 border-round">
    <div class="col-6 border-right-1 border-200">
        <a pRipple class="flex p-3 align-items-center hover:surface-100 font-medium cursor-pointer transition-colors transition-duration-150">
            <p-avatar [image]="user?.profilePicture || 'https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png'" 
                     class="mr-2" 
                     shape="circle"
                     [style]="{'width': '2.5rem', 'height': '2.5rem'}" />
            <div class="block overflow-hidden">
                <div class="text-900 font-medium text-overflow-ellipsis white-space-nowrap overflow-hidden">{{ user?.nom }}</div>
                <span class="text-600 font-medium text-sm text-overflow-ellipsis white-space-nowrap overflow-hidden">{{ user?.email }}</span>
            </div>
        </a>
    </div>
    <div class="col-6 flex align-items-center">
        <ng-container *ngIf="user">
            <a pRipple (click)="logout(); menuVisible = false" class="w-full inline-flex align-items-center justify-content-center 
            cursor-pointer py-3 px-4 text-700 select-none text-base font-medium hover:surface-100">
                <i class="pi pi-sign-out mr-3 text-base"></i>
                <span>Logout</span>
            </a>
        </ng-container>
        <ng-container *ngIf="!user">
            <a pRipple routerLink="login" (click)="menuVisible = false" class="w-full inline-flex align-items-center 
            justify-content-center cursor-pointer py-3 px-4 text-700 select-none text-base font-medium hover:surface-100">
                <i class="pi pi-sign-in mr-3 text-base"></i>
                <span>Sign In</span>
            </a>
        </ng-container>
    </div>
</div>
    </div>
    
    <!-- Right side icons -->
    <div class="flex ml-auto">
        <ul class="list-none p-0 m-0 flex align-items-center">
            <li class="flex">
              <a pRipple class="text-900 font-medium inline-flex align-items-center justify-content-center cursor-pointer px-2 hover:text-primary">
                <i class="pi pi-search text-base"></i>
                <span class="hidden lg:inline ml-2">Search</span>
              </a>
            </li>
            <li *ngIf="user?.role === 'Admin'" class="flex" routerLink="admin">
                <a pRipple class="text-900 font-medium inline-flex align-items-center justify-content-center cursor-pointer px-2 hover:text-primary">
                  <span class="hidden lg:inline ml-2">Admin</span>
                </a>
            </li>
            <li class="flex">
              <a pRipple class="text-900 font-medium inline-flex align-items-center justify-content-center cursor-pointer px-2 hover:text-primary">
                <i class="pi pi-shopping-cart text-base" pBadge></i>
                <span class="hidden lg:inline ml-2">Cart</span>
              </a>
            </li>
            <li class="flex">
              <a pRipple 
                 class="text-900 font-medium inline-flex align-items-center justify-content-center cursor-pointer px-2 hover:text-primary"
                 (click)="toggleDarkMode()"
                 pTooltip="Toggle theme"
                 tooltipPosition="bottom">
                <i class="pi text-base" [ngClass]="currentThemeIcon"></i>
              </a>
            </li>
            
            <!-- Desktop Profile dropdown -->
            <li *ngIf="user" class="hidden lg:flex border-left-1 surface-border ml-2 relative">
                <a pRipple 
                   (click)="toggleProfileMenuOn($event)"
                   class="flex px-3 py-2 align-items-center hover:surface-100 font-medium border-round cursor-pointer transition-colors transition-duration-150">
                    <p-avatar 
                        [image]="user.profilePicture || 'https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png'" 
                        class="mr-2" 
                        shape="circle" />
                    <i class="pi pi-chevron-down ml-1 text-xs"></i>
                </a>
                
                <!-- Profile dropdown menu -->
                <div *ngIf="showProfileMenu" 
                     class="profile-menu absolute surface-overlay shadow-4 border-round p-3 flex flex-column gap-2" 
                     style="right: 0; top: 48px; z-index: 1000; min-width: 220px; border: 1px solid var(--surface-border);">
                    <div class="mb-2 border-bottom-1 surface-border pb-2">
                        <div class="font-medium text-900">{{ user.nom }} {{ user.prenom }}</div>
                        <div class="text-sm text-600">{{ user.email }}</div>
                    </div>
                    
                    <a (click)="toggleProfileMenuOn($event)"
                       routerLink="/account" 
                       class="no-underline text-700 p-2 border-round flex align-items-center hover:surface-100">
                        <i class="pi pi-user mr-2"></i>
                        <span>My Account</span>
                    </a>
                    <a (click)="toggleProfileMenuOn($event)"
                       routerLink="orders" 
                       class="no-underline text-700 p-2 border-round flex align-items-center hover:surface-100">
                        <i class="pi pi-shopping-bag mr-2"></i>
                        <span>Orders</span>
                    </a>
                    <div class="border-top-1 surface-border my-2"></div>
                    <a (click)="logout()" 
                       class="no-underline text-700 p-2 border-round flex align-items-center hover:surface-100 cursor-pointer">
                        <i class="pi pi-sign-out mr-2"></i>
                        <span>Logout</span>
                    </a>
                </div>
            </li>
        </ul>
    </div>
    
    <!-- Mobile menu toggle -->
    <a pRipple class="cursor-pointer flex align-items-center justify-content-center lg:hidden px-2 mr-1" 
       (click)="menuVisible = !menuVisible">
        <i class="pi pi-bars text-2xl"></i>
    </a>
</div>